<!doctype html>
<html>
    <head>
        <title>easyXSS</title>
        <script type="text/javascript" src="../easyXSS.debug.js">
        </script>
        <script type="text/javascript">
            easyXSS.DomHelper.requiresJSON("../json2.js");
        </script>
        <script type="text/javascript">
            var channel, remote;
            window.onload = function(){
                channel = easyXSS.createChannel({
                    onReady: function(){
                        remote = easyXSS.createInterface(channel, {
                            remote: {
                                alertMessage: {
                                    isVoid: true
                                }
                            },
                            local: {
                                addNumbers: {
                                    method: function(a, b){
                                        return a + b;
                                    }
                                },
                                multiplyNumbers: {
                                    isAsync: true,
                                    method: function(a, b, fn){
                                        window.setTimeout(function(){
                                            fn(a * b);
                                        }, 5000);
                                    }
                                },
                                noOp: {
                                    isVoid: true,
                                    method: function(){
                                        alert("Method not returning any data");
                                    }
                                }
                            }
                        });
                    }
                });
            }
        </script>
    </head>
    <body>
		<script type="text/javascript">
            document.write("Domain: " + location.host);
        </script>
        <div id="log" style="height:100px;border:1px dotted black;overflow:auto"></div>
        <br/>
        <input type="button" onclick="remote.alertMessage('message from remote');" value="call alertMessage on local domain"/>
    </body>
</html>