<!doctype html>
<html>
    <head>
        <title>easyXDM</title>
        <script type="text/javascript" src="../easyXDM.debug.js">
        </script>
        <script type="text/javascript">
            /**
             * Request the use of the JSON object
             */
            easyXDM.DomHelper.requiresJSON("../json2.js");
        </script>
        <script type="text/javascript">
            var remote;
            window.onload = function(){
                /**
                 * When the window is finished loading start setting up the interface
                 */
                remote = new easyXDM.Interface(/** The channel configuration */{
                    /**
                     * Register the url to hash.html, this must be an absolute path
                     * or a path relative to the root.
                     * @field
                     */
                    local: "../hash.html",
                    /**
                     * Register the url to the remote interface
                     * @field
                     */
                    remote: "http://provider.easyxdm.net/example/xhr_remote.html",
                    /**
                     * Register the DOMElement that the generated IFrame should be inserted into
                     */
                    container: document.getElementById("embedded")
                }, /** The interface configuration */ {
                    remote: {
                        getGlossary: {},
                        ajax: {}
                    }
                },/**The onReady handler*/ function(){
                
                
                });
            }
            function getGlossary(){
                remote.getGlossary(function(json){
                    alert(json.glossary.title);
                });
            }
            
            function getGlossaryUsingAjax(){
                remote.ajax("glossary.json", {
                    name: "sometitle"
                }, function(json){
                    alert(json.glossary.title);
                });
            }
        </script>
        <style type="text/css">
            #embedded {
                height: 200px;
            } #embedded iframe {
                width: 100%;
                height: 100%;
            }
        </style>
    </head>
    <body>
        <script type="text/javascript">
            document.write("Domain: " + location.host);
        </script>
        <!-- easyXDM.Debug.trace(msg) will output its messages to any element with the id "log" -->
        <div id="log" style="height:100px;border:1px dotted black;overflow:auto">
        </div>
        <div id="embedded">
        </div>
        <div>
            <input type="button" onclick="getGlossary()" value="Call getGlossary using the exposed method"/>
        <br/>
		<input type="button" onclick="getGlossaryUsingAjax()" value="Call getGlossary using the exposed ajax wraper"/>
        
		</div>
    </body>
</html>