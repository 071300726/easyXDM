<!doctype html>
<html>
    <head>
        <title>easyXDM</title>
        <script type="text/javascript">
            if (location.href.indexOf("src") !== -1) {
                if (typeof JSON === "undefined") {
                    document.write(unescape("%3Cscript src='../../tools/json2.js' type='text/javascript'%3E%3C/script%3E"));
                }
                document.write(unescape("%3Cscript src='../easyXDM.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../easyXDM.DomHelper.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../easyXDM.Serializing.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../easyXDM.transport.HashTransport.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../easyXDM.transport.NameTransport.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../easyXDM.transport.PostMessageTransport.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../easyXDM.transport.BestAvailableTransport.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../easyXDM.Configuration.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../easyXDM.Url.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../easyXDM.Widgets.js' type='text/javascript'%3E%3C/script%3E"));
            }
            else {
                if (typeof JSON === "undefined") {
                    document.write(unescape("%3Cscript src='../json2.js' type='text/javascript'%3E%3C/script%3E"));
                }
                document.write(unescape("%3Cscript src='../easyXDM.debug.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>
        <script type="text/javascript">
            easyXDM.DomHelper.requiresJSON("../json2.js");
        </script>
        <script type="text/javascript">
            var remote;
            window.onload = function(){
                remote = new easyXDM.Interface({}, {
                    remote: {
                        voidCallback: {
                            isVoid: true
                        }
                    },
                    local: {
                        voidMethod: {
                            isVoid: true,
                            method: function(msg){
                                // Echo back the message
                                remote.voidCallback(msg);
                            }
                        },
                        asyncMethod: {
                            isAsync: true,
                            method: function(msg, fn){
                                window.setTimeout(function(){
                                    // Echo back the msg
                                    fn(msg);
                                }, 100);
                            }
                        },
                        method: {
                            method: function(msg){
                                // Echo back the msg
                                return msg;
                            }
                        }
                    }
                });
            };
            window.onunload = function(){
				if (remote) {
					remote.destroy();
				}
            };
        </script>
    </head>
    <body>
    </body>
</html>
