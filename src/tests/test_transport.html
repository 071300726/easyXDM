<!doctype html>
<html>
    <head>
        <title>easyXDM</title>
        <script type="text/javascript">
            if (location.href.indexOf("src") !== -1) {
                document.write(unescape("%3Cscript src='../easyXDM.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../Debug.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../DomHelper.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../Fn.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../Socket.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../Rpc.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../stack/SameOriginTransport.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../stack/PostMessageTransport.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../stack/FrameElementTransport.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../stack/NixTransport.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../stack/NameTransport.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../stack/HashTransport.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../stack/ReliableBehavior.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../stack/QueueBehavior.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../stack/VerifyBehavior.js' type='text/javascript'%3E%3C/script%3E"));
                document.write(unescape("%3Cscript src='../stack/RpcBehavior.js' type='text/javascript'%3E%3C/script%3E"));
            }
            else {
                if (typeof JSON === "undefined") {
                    document.write(unescape("%3Cscript src='../json2.js' type='text/javascript'%3E%3C/script%3E"));
                }
                document.write(unescape("%3Cscript src='../easyXDM.debug.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>
        <script type="text/javascript">
            var transport;
            window.onload = function(){
                transport = new easyXDM.Socket({
                    local: "../name.html",
                    onMessage: function(message, origin){
                        // Echo back the message
                        transport.postMessage(message);
                    }
                });
            };
            window.onunload = function(){
                if (transport) {
                    transport.destroy();
                }
            };
        </script>
    </head>
    <body>
    </body>
</html>
